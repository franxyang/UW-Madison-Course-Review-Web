// Maps AEFIS department descriptions to UW School names
export const DEPT_TO_SCHOOL_MAP: Record<string, string> = {
  // Agricultural & Life Sciences
  'AGRICULTURAL AND APPLIED ECONOMICS': 'Agricultural & Life Sciences, College of',
  'AGRICULTURAL AND APPLIED ECON': 'Agricultural & Life Sciences, College of',
  'BIOLOGICAL SYSTEMS ENGINEERING': 'Agricultural & Life Sciences, College of',
  'LIFE SCIENCES COMMUNICATION': 'Agricultural & Life Sciences, College of',
  'AGROECOLOGY': 'Agricultural & Life Sciences, College of',
  'AGRONOMY': 'Agricultural & Life Sciences, College of',
  'ANIMAL SCIENCES': 'Agricultural & Life Sciences, College of',
  'BACTERIOLOGY': 'Agricultural & Life Sciences, College of',
  'BIOCHEMISTRY': 'Agricultural & Life Sciences, College of',
  'DAIRY SCIENCE': 'Agricultural & Life Sciences, College of',
  'ENTOMOLOGY': 'Agricultural & Life Sciences, College of',
  'FOOD SCIENCE': 'Agricultural & Life Sciences, College of',
  'FOREST AND WILDLIFE ECOLOGY': 'Agricultural & Life Sciences, College of',
  'GENETICS': 'Agricultural & Life Sciences, College of',
  'HORTICULTURE': 'Agricultural & Life Sciences, College of',
  'NUTRITIONAL SCIENCES': 'Agricultural & Life Sciences, College of',
  'PLANT PATHOLOGY': 'Agricultural & Life Sciences, College of',
  'SOIL SCIENCE': 'Agricultural & Life Sciences, College of',

  // Business
  'ACCOUNTING & INFORMATION SYSTEMS': 'Business, Wisconsin School of',
  'ACCOUNTING': 'Business, Wisconsin School of',
  'BUSINESS': 'Business, Wisconsin School of',
  'FINANCE': 'Business, Wisconsin School of',
  'MANAGEMENT & HUMAN RESOURCES': 'Business, Wisconsin School of',
  'MARKETING': 'Business, Wisconsin School of',
  'OPERATIONS MANAGEMENT': 'Business, Wisconsin School of',
  'REAL ESTATE': 'Business, Wisconsin School of',
  'RISK MANAGEMENT': 'Business, Wisconsin School of',

  // Computer, Data & Information Sciences
  'COMPUTER SCIENCES': 'Computer, Data & Information Sciences, School of',
  'COMPUTER SCIENCE': 'Computer, Data & Information Sciences, School of',
  'DATA SCIENCE': 'Computer, Data & Information Sciences, School of',
  'INFORMATION SYSTEMS': 'Computer, Data & Information Sciences, School of',
  'LIBRARY & INFORMATION STUDIES': 'Computer, Data & Information Sciences, School of',

  // Education
  'ART EDUCATION': 'Education, School of',
  'COUNSELING PSYCHOLOGY': 'Education, School of',
  'CURRICULUM & INSTRUCTION': 'Education, School of',
  'DANCE': 'Education, School of',
  'EDUCATIONAL LEADERSHIP': 'Education, School of',
  'EDUCATIONAL POLICY STUDIES': 'Education, School of',
  'EDUCATIONAL PSYCHOLOGY': 'Education, School of',
  'KINESIOLOGY': 'Education, School of',
  'REHABILITATION PSYCHOLOGY': 'Education, School of',

  // Engineering
  'BIOMEDICAL ENGINEERING': 'Engineering, College of',
  'CHEMICAL ENGINEERING': 'Engineering, College of',
  'CIVIL & ENVIRONMENTAL ENGINEERING': 'Engineering, College of',
  'ELECTRICAL & COMPUTER ENGINEERING': 'Engineering, College of',
  'ENGINEERING PHYSICS': 'Engineering, College of',
  'GEOLOGICAL ENGINEERING': 'Engineering, College of',
  'INDUSTRIAL ENGINEERING': 'Engineering, College of',
  'MATERIALS SCIENCE & ENGINEERING': 'Engineering, College of',
  'MECHANICAL ENGINEERING': 'Engineering, College of',
  'NUCLEAR ENGINEERING': 'Engineering, College of',

  // Human Ecology
  'CIVIL SOCIETY & COMMUNITY RESEARCH': 'Human Ecology, School of',
  'CONSUMER SCIENCE': 'Human Ecology, School of',
  'DESIGN STUDIES': 'Human Ecology, School of',
  'HUMAN ECOLOGY': 'Human Ecology, School of',
  'INTERIOR DESIGN': 'Human Ecology, School of',
  'TEXTILES & FASHION DESIGN': 'Human Ecology, School of',

  // Journalism & Mass Communication
  'JOURNALISM & MASS COMMUNICATION': 'Journalism & Mass Communication, School of',
  'JOURNALISM': 'Journalism & Mass Communication, School of',
  'STRATEGIC COMMUNICATION': 'Journalism & Mass Communication, School of',

  // Law
  'LAW': 'Law School',

  // Letters & Science (largest college - default for most liberal arts)
  'AFRICAN CULTURAL STUDIES': 'Letters & Science, College of',
  'AFRO-AMERICAN STUDIES': 'Letters & Science, College of',
  'AMERICAN INDIAN STUDIES': 'Letters & Science, College of',
  'ANTHROPOLOGY': 'Letters & Science, College of',
  'ART HISTORY': 'Letters & Science, College of',
  'ART': 'Letters & Science, College of',
  'ASIAN AMERICAN STUDIES': 'Letters & Science, College of',
  'ASIAN LANGUAGES AND CULTURES': 'Letters & Science, College of',
  'ASIAN STUDIES': 'Letters & Science, College of',
  'ASTRONOMY': 'Letters & Science, College of',
  'ATMOSPHERIC & OCEANIC SCIENCES': 'Letters & Science, College of',
  'BIOLOGY': 'Letters & Science, College of',
  'BOTANY': 'Letters & Science, College of',
  'CHEMISTRY': 'Letters & Science, College of',
  'CHICANA/O AND LATINA/O STUDIES': 'Letters & Science, College of',
  'CHINESE': 'Letters & Science, College of',
  'CLASSICS': 'Letters & Science, College of',
  'COMMUNICATION ARTS': 'Letters & Science, College of',
  'COMPARATIVE LITERATURE': 'Letters & Science, College of',
  'ECONOMICS': 'Letters & Science, College of',
  'ENGLISH': 'Letters & Science, College of',
  'ENVIRONMENTAL STUDIES': 'Letters & Science, College of',
  'FRENCH': 'Letters & Science, College of',
  'GENDER & WOMEN STUDIES': 'Letters & Science, College of',
  'GEOGRAPHY': 'Letters & Science, College of',
  'GEOLOGY': 'Letters & Science, College of',
  'GEOSCIENCE': 'Letters & Science, College of',
  'GERMAN': 'Letters & Science, College of',
  'HEBREW': 'Letters & Science, College of',
  'HISTORY': 'Letters & Science, College of',
  'HISTORY OF SCIENCE': 'Letters & Science, College of',
  'INTEGRATED LIBERAL STUDIES': 'Letters & Science, College of',
  'INTERNATIONAL STUDIES': 'Letters & Science, College of',
  'ITALIAN': 'Letters & Science, College of',
  'JAPANESE': 'Letters & Science, College of',
  'JEWISH STUDIES': 'Letters & Science, College of',
  'LANGUAGES AND CULTURES OF ASIA': 'Letters & Science, College of',
  'LATIN': 'Letters & Science, College of',
  'LATIN AMERICAN STUDIES': 'Letters & Science, College of',
  'LINGUISTICS': 'Letters & Science, College of',
  'MATHEMATICS': 'Letters & Science, College of',
  'MICROBIOLOGY': 'Letters & Science, College of',
  'MUSIC': 'Letters & Science, College of',
  'PHILOSOPHY': 'Letters & Science, College of',
  'PHYSICS': 'Letters & Science, College of',
  'POLITICAL SCIENCE': 'Letters & Science, College of',
  'PORTUGUESE': 'Letters & Science, College of',
  'PSYCHOLOGY': 'Letters & Science, College of',
  'RELIGIOUS STUDIES': 'Letters & Science, College of',
  'RUSSIAN': 'Letters & Science, College of',
  'SCANDINAVIAN STUDIES': 'Letters & Science, College of',
  'SLAVIC': 'Letters & Science, College of',
  'SOCIAL WORK': 'Letters & Science, College of',
  'SOCIOLOGY': 'Letters & Science, College of',
  'SPANISH': 'Letters & Science, College of',
  'STATISTICS': 'Letters & Science, College of',
  'THEATER': 'Letters & Science, College of',
  'THEATRE': 'Letters & Science, College of',
  'URBAN PLANNING': 'Letters & Science, College of',
  'ZOOLOGY': 'Letters & Science, College of',

  // Medicine & Public Health
  'ANATOMY': 'Medicine & Public Health, School of',
  'ANESTHESIOLOGY': 'Medicine & Public Health, School of',
  'BIOSTATISTICS': 'Medicine & Public Health, School of',
  'DERMATOLOGY': 'Medicine & Public Health, School of',
  'FAMILY MEDICINE': 'Medicine & Public Health, School of',
  'GENETICS & GENOMICS': 'Medicine & Public Health, School of',
  'MEDICINE': 'Medicine & Public Health, School of',
  'MEDICAL PHYSICS': 'Medicine & Public Health, School of',
  'NEUROLOGY': 'Medicine & Public Health, School of',
  'NEUROSCIENCE': 'Medicine & Public Health, School of',
  'OBSTETRICS & GYNECOLOGY': 'Medicine & Public Health, School of',
  'ONCOLOGY': 'Medicine & Public Health, School of',
  'OPHTHALMOLOGY': 'Medicine & Public Health, School of',
  'PATHOLOGY': 'Medicine & Public Health, School of',
  'PEDIATRICS': 'Medicine & Public Health, School of',
  'PHYSIOLOGY': 'Medicine & Public Health, School of',
  'POPULATION HEALTH': 'Medicine & Public Health, School of',
  'PSYCHIATRY': 'Medicine & Public Health, School of',
  'PUBLIC HEALTH': 'Medicine & Public Health, School of',
  'RADIOLOGY': 'Medicine & Public Health, School of',
  'SURGERY': 'Medicine & Public Health, School of',

  // Nursing
  'NURSING': 'Nursing, School of',

  // Pharmacy
  'PHARMACY': 'Pharmacy, School of',
  'PHARMACEUTICAL SCIENCES': 'Pharmacy, School of',

  // Social Work
  'SOCIAL WELFARE': 'Social Work, School of',

  // Veterinary Medicine
  'VETERINARY MEDICINE': 'Veterinary Medicine, School of',
  'COMPARATIVE BIOSCIENCES': 'Veterinary Medicine, School of',
  'PATHOBIOLOGICAL SCIENCES': 'Veterinary Medicine, School of',
  'SURGICAL SCIENCES': 'Veterinary Medicine, School of',

  // Public Affairs
  'PUBLIC AFFAIRS': 'Public Affairs, La Follette School of',
  'PUBLIC POLICY': 'Public Affairs, La Follette School of',

  // Default fallback for any unmatched
  'DEFAULT': 'Letters & Science, College of'
}

// Standardize subject codes (e.g., "COMP SCI" -> "CS")
export const SUBJECT_CODE_MAP: Record<string, string> = {
  'COMP SCI': 'CS',
  'COMPUTER SCIENCES': 'CS',
  'MATH': 'MATH',
  'MATHEMATICS': 'MATH',
  'ECON': 'ECON',
  'ECONOMICS': 'ECON',
  'PSYCH': 'PSYCH',
  'PSYCHOLOGY': 'PSYCH',
  'CHEM': 'CHEM',
  'CHEMISTRY': 'CHEM',
  'PHYSICS': 'PHYSICS',
  'STAT': 'STAT',
  'STATISTICS': 'STAT',
  'A A E': 'AAE',
  'E C E': 'ECE',
  'M E': 'ME',
  'C S': 'CS',
  'ENGLISH': 'ENGLISH',
  'HISTORY': 'HISTORY',
  'ART': 'ART',
  'MUSIC': 'MUSIC',
  'BIOLOGY': 'BIOLOGY',
  'ANTHRO': 'ANTHRO',
  'SOCIOLOGY': 'SOC',
  'PHIL': 'PHIL',
  'PHILOSOPHY': 'PHIL',
  'POLI SCI': 'POLI SCI',
  'POLITICAL SCIENCE': 'POLI SCI',
}

export function standardizeSubjectCode(code: string): string {
  const upperCode = code.toUpperCase().trim()
  return SUBJECT_CODE_MAP[upperCode] || upperCode
}

export function inferCredits(courseNumber: string | number): number {
  const num = typeof courseNumber === 'string' ? parseInt(courseNumber) : courseNumber

  // UW Madison convention:
  // 1-99: 1 credit (special topics, co-op)
  // 100-199: 1-3 credits (intro seminars)
  // 200-299: 3 credits (intro courses)
  // 300-499: 3-4 credits (intermediate)
  // 500-699: 3-4 credits (advanced undergrad/grad)
  // 700+: 3 credits (graduate)

  if (num < 100) return 1
  if (num < 200) return 2
  if (num < 300) return 3
  if (num < 500) return 3
  if (num < 700) return 3
  return 3  // Conservative default
}

export function inferLevel(courseNumber: string | number): 'Elementary' | 'Intermediate' | 'Advanced' {
  const num = typeof courseNumber === 'string' ? parseInt(courseNumber) : courseNumber

  if (num < 300) return 'Elementary'
  if (num < 500) return 'Intermediate'
  return 'Advanced'
}

export function mapDeptToSchool(aefisDescription: string): string {
  const upperDesc = aefisDescription.toUpperCase().trim()
  return DEPT_TO_SCHOOL_MAP[upperDesc] || DEPT_TO_SCHOOL_MAP['DEFAULT']
}